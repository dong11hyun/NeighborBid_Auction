<!DOCTYPE html>
{% load static %}
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>A1 Auction</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/snow.css' %}">


    <!-- Google Analytics 4 -->
    {% if GA4_MEASUREMENT_ID %}
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ GA4_MEASUREMENT_ID }}"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', '{{ GA4_MEASUREMENT_ID }}');
    </script>
    {% endif %}
</head>

<body>
    <nav class="navbar navbar-dark bg-dark mb-4">
        <div class="container">
            <a class="navbar-brand" href="/">ğŸ† A1 Auction</a>

            <form class="d-flex mx-auto" action="{% url 'auction_list' %}" method="get" style="width: 40%;">
                <input class="form-control me-2" type="search" name="q" placeholder="ìƒí’ˆëª… ê²€ìƒ‰..." aria-label="Search"
                    value="{{ request.GET.q }}">
                <button class="btn btn-outline-light" type="submit">ğŸ”</button>
            </form>
            <div class="d-flex text-white align-items-center">
                {% if user.is_authenticated %}
                <span class="me-3">ğŸ‘¤ {{ user.username }} (ì‹ ìš©ë„: {{ user.reputation_score }})</span>
                <span class="me-3">ğŸ’° {{ user.wallet.balance }}ì›</span>

                <a href="{% url 'auction_create' %}" class="btn btn-sm btn-warning fw-bold me-2">+ ê²½ë§¤ ë“±ë¡</a>
                <a href="{% url 'mypage' %}" class="btn btn-sm btn-light me-2">ë§ˆì´í˜ì´ì§€</a>

                <button id="snow-toggle" class="btn btn-sm btn-outline-info me-2" title="ëˆˆ íš¨ê³¼">â„ï¸</button>

                <form action="{% url 'logout' %}" method="post" class="d-inline">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-sm btn-outline-light">ë¡œê·¸ì•„ì›ƒ</button>
                </form>
                {% else %}
                <button id="snow-toggle" class="btn btn-sm btn-outline-info me-2" title="ëˆˆ íš¨ê³¼">â„ï¸</button>
                <a href="{% url 'login' %}" class="btn btn-sm btn-outline-light me-2">ë¡œê·¸ì¸</a>
                <a href="{% url 'signup' %}" class="btn btn-sm btn-warning">íšŒì›ê°€ì…</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <div class="container">
        {% if messages %}
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
            {{ message }}
        </div>
        {% endfor %}
        {% endif %}

        {% block content %}
        {% endblock %}
    </div>

    <!-- Snow Canvas will be added by JavaScript -->

    <!-- Snow Effect Script -->
    <script src="{% static 'js/snow.js' %}"></script>
</body>

</html>